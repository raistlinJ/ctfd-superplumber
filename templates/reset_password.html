{% extends "base.html" %}

{% block content %}
  <section class="container mario-hero mario-hero--compact">
    <div class="row align-items-center g-4">
      <div class="col-lg-7">
        <p class="mario-hero__badge">{% trans %}Safety Block{% endtrans %}</p>
        <h1 class="mario-hero__title">{% trans %}Reset Password{% endtrans %}</h1>
        <p class="mario-hero__subtitle">
          {% if mode == "set" %}
            {% trans %}Drop in a new password to keep collecting coins without missing a beat.{% endtrans %}
          {% else %}
            {% trans %}Request a reset link and we’ll send a message via Lakitu Mail in just a moment.{% endtrans %}
          {% endif %}
        </p>
      </div>
      <div class="col-lg-5 text-center">
        <div class="mario-hero__art" aria-hidden="true">
          <img class="mario-hero__asset mario-hero__asset--flag" src="{{ url_for('views.themes', theme=Configs.theme or 'core-beta', path='img/mario/flag.svg') }}" alt="">
          <img class="mario-hero__asset mario-hero__asset--star" src="{{ url_for('views.themes', theme=Configs.theme or 'core-beta', path='img/mario/star.svg') }}" alt="">
        </div>
      </div>
    </div>
  </section>

  <div class="container mario-auth-shell">
    <div class="row g-5 align-items-start justify-content-center">
      <div class="col-lg-5 col-xl-4">
        <div class="mario-auth-card">
          {% include "components/errors.html" %}

          {% if mode == "set" %}
            <h2 class="mario-retro text-center mb-4">{% trans %}Set New Password{% endtrans %}</h2>
            {% with form = Forms.auth.ResetPasswordForm() %}
              <form method="post" accept-charset="utf-8" role="form">
                <p>
                  {% trans %}Enter a new password below to rejoin the adventure.{% endtrans %}
                </p>

                <div class="mb-3">
                  {{ form.password.label(class="form-label") }}
                  {{ form.password(class="form-control", autocomplete="new-password") }}
                </div>

                <div class="row pt-3">
                  <div class="col-6 col-md-5 offset-6 offset-md-7">
                    {{ form.submit(class="btn btn-primary w-100") }}
                  </div>
                </div>

                {{ form.nonce() }}
              </form>
            {% endwith %}
          {% else %}
            <h2 class="mario-retro text-center mb-4">{% trans %}Request Reset Link{% endtrans %}</h2>
            {% with form = Forms.auth.ResetPasswordRequestForm() %}
              <form method="post" accept-charset="utf-8" autocomplete="off" role="form">
                <p>
                  {% trans %}Provide the email tied to your account and we’ll send a reset link.{% endtrans %}
                </p>

                <div class="mb-3">
                  {{ form.email.label(class="form-label") }}
                  {{ form.email(class="form-control") }}
                </div>

                <div class="row pt-3">
                  <div class="col-6 col-md-5 offset-6 offset-md-7">
                    {{ form.submit(class="btn btn-primary w-100") }}
                  </div>
                </div>

                {{ form.nonce() }}
              </form>
            {% endwith %}
          {% endif %}
        </div>
      </div>

      <div class="col-lg-5 col-xl-4">
        <div class="mario-auth-illustration" aria-hidden="true">
          <img class="mario-auth-illustration__sprite mario-auth-illustration__sprite--pipe" src="{{ url_for('views.themes', theme=Configs.theme or 'core-beta', path='img/mario/pipe.svg') }}" alt="">
          <img class="mario-auth-illustration__sprite mario-auth-illustration__sprite--star" src="{{ url_for('views.themes', theme=Configs.theme or 'core-beta', path='img/mario/star.svg') }}" alt="">
          <img class="mario-auth-illustration__sprite mario-auth-illustration__sprite--flower" src="{{ url_for('views.themes', theme=Configs.theme or 'core-beta', path='img/mario/fire-flower.svg') }}" alt="">
        </div>
      </div>
    </div>
  </div>
{% endblock %}

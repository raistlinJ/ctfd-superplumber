{% extends "base.html" %}

{% block content %}
  <section class="container mario-hero mario-hero--compact">
    <div class="row align-items-center g-4">
      <div class="col-lg-7">
        <p class="mario-hero__badge">{% trans %}New Challenger{% endtrans %}</p>
        <h1 class="mario-hero__title">{% trans %}Register{% endtrans %}</h1>
        <p class="mario-hero__subtitle">
          {% trans %}Pick a player name, charge up a fresh password, and get ready to chase the flag pole.{% endtrans %}
        </p>
        <div class="d-flex flex-wrap gap-3 mt-4">
          <div class="mario-world-pill">{% trans %}Power-Up{% endtrans %}</div>
          <div class="mario-world-pill">{% trans %}Join Party{% endtrans %}</div>
        </div>
      </div>
      <div class="col-lg-5 text-center">
        <div class="mario-hero__art" aria-hidden="true">
          <img class="mario-hero__asset mario-hero__asset--castle" src="{{ url_for('views.themes', theme=Configs.theme or 'core-beta', path='img/mario/castle.svg') }}" alt="">
          <img class="mario-hero__asset mario-hero__asset--pipe" src="{{ url_for('views.themes', theme=Configs.theme or 'core-beta', path='img/mario/pipe.svg') }}" alt="">
          <img class="mario-hero__asset mario-hero__asset--star" src="{{ url_for('views.themes', theme=Configs.theme or 'core-beta', path='img/mario/star.svg') }}" alt="">
        </div>
      </div>
    </div>
  </section>

  <div class="container mario-auth-shell">
    <div class="row g-5 align-items-start justify-content-center">
      <div class="col-lg-5 col-xl-4">
        <div class="mario-auth-card">
          <h2 class="mario-retro text-center mb-4">{% trans %}Create Player{% endtrans %}</h2>
          {% include "components/errors.html" %}

          {% if integrations.mlc() %}
            <a class="btn btn-secondary btn-lg w-100 mb-4" href="{{ url_for('auth.oauth_login') }}">
              {% trans %}Login with Major League Cyber{% endtrans %}
            </a>
          {% endif %}

          {% with form = Forms.auth.RegistrationForm() %}
            {% from "macros/forms.html" import render_extra_fields %}

            <form method="post" accept-charset="utf-8" role="form">
              <div class="mb-3">
                <b>{{ form.name.label(class="form-label") }}</b>
                {{ form.name(class="form-control", value=name, autocomplete="username") }}
                <small class="form-text text-muted">
                  {% trans %}Your username on the site{% endtrans %}
                </small>
              </div>

              <div class="mb-3">
                <b>{{ form.email.label(class="form-label") }}</b>
                {{ form.email(class="form-control", value=email, autocomplete="email") }}
                <small class="form-text text-muted">
                  {% trans %}Never shown to the public{% endtrans %}
                </small>
              </div>

              <div class="mb-3">
                <b>{{ form.password.label(class="form-label") }}</b>
                {{ form.password(class="form-control", value=password, autocomplete="new-password") }}
                <small class="form-text text-muted">
                  {% trans %}Password used to log into your account{% endtrans %}
                </small>
              </div>

              {{ render_extra_fields(form.extra) }}

              {{ form.nonce() }}

              <div class="row pt-3">
                <div class="col-6 col-md-5 offset-6 offset-md-7">
                  {{ form.submit(class="btn btn-primary w-100") }}
                </div>
              </div>

              {% if Configs.tos_or_privacy %}
                <div class="row pt-3">
                  <div class="col-md-12 text-center">
                    <small class="text-muted text-center">
                      {% trans trimmed privacy_link=Configs.privacy_link, tos_link=Configs.tos_link %}
                        By registering, you agree to the
                        <a href="{{ privacy_link }}" target="_blank">privacy policy</a>
                        and <a href="{{ tos_link }}" target="_blank">terms of service</a>
                      {% endtrans %}
                    </small>
                  </div>
                </div>
              {% endif %}
            </form>
          {% endwith %}

          <div class="mario-auth-cta mt-4">
            {% trans %}Already geared up?{% endtrans %}
            <a href="{{ url_for('auth.login') }}">{% trans %}Log In{% endtrans %}</a>
          </div>
        </div>
      </div>

      <div class="col-lg-5 col-xl-4">
        <div class="mario-auth-illustration" aria-hidden="true">
          <img class="mario-auth-illustration__sprite mario-auth-illustration__sprite--pipe" src="{{ url_for('views.themes', theme=Configs.theme or 'core-beta', path='img/mario/pipe.svg') }}" alt="">
          <img class="mario-auth-illustration__sprite mario-auth-illustration__sprite--star" src="{{ url_for('views.themes', theme=Configs.theme or 'core-beta', path='img/mario/star.svg') }}" alt="">
          <img class="mario-auth-illustration__sprite mario-auth-illustration__sprite--flower" src="{{ url_for('views.themes', theme=Configs.theme or 'core-beta', path='img/mario/fire-flower.svg') }}" alt="">
        </div>
      </div>
    </div>
  </div>
{% endblock %}

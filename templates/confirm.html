{% extends "base.html" %}

{% block content %}
  <section class="container mario-hero mario-hero--compact">
    <div class="row align-items-center g-4">
      <div class="col-lg-7">
        <p class="mario-hero__badge">{% trans %}Mailbox Bonus{% endtrans %}</p>
        <h1 class="mario-hero__title">{% trans %}Confirm Account{% endtrans %}</h1>
        <p class="mario-hero__subtitle">
          {% if request.args.get('flow') == "init" %}
            {% trans %}Send yourself a fresh confirmation email and tap the link to finish spawning in.{% endtrans %}
          {% else %}
            {% trans %}We just dropped you a note—follow the link inside to complete verification.{% endtrans %}
          {% endif %}
        </p>
      </div>
      <div class="col-lg-5 text-center">
        <div class="mario-hero__art" aria-hidden="true">
          <img class="mario-hero__asset mario-hero__asset--castle" src="{{ url_for('views.themes', theme=Configs.theme or 'core-beta', path='img/mario/castle.svg') }}" alt="">
          <img class="mario-hero__asset mario-hero__asset--star" src="{{ url_for('views.themes', theme=Configs.theme or 'core-beta', path='img/mario/star.svg') }}" alt="">
        </div>
      </div>
    </div>
  </section>

  <div class="container mario-auth-shell">
    <div class="row g-5 align-items-start justify-content-center">
      <div class="col-lg-6 col-xl-5">
        <div class="mario-auth-card">
          {% include "components/errors.html" %}

          {% if request.args.get('flow') == "init" %}
            <p class="text-center">
              {% trans %}Click the button to send yourself a confirmation email. After that, follow the link inside the message to finish verification.{% endtrans %}
            </p>
          {% else %}
            <p class="text-center">
              {% trans %}We sent the email! If it doesn’t show up soon, check spam or reach out to an admin.{% endtrans %}
            </p>
          {% endif %}

          <div class="mario-auth-cta mb-4">
            {% trans %}Need to swap addresses?{% endtrans %}
            <a href="{{ url_for('views.settings') }}">{% trans %}Change Email{% endtrans %}</a>
          </div>

          {% with form = Forms.auth.ConfirmForm() %}
            <form method="POST" action="{{ url_for('auth.confirm') }}">
              <div class="row g-3">
                <div class="col-md-6">
                  {{ form.submit(class="btn btn-primary w-100 p-2") }}
                </div>
                <div class="col-md-6">
                  <a href="{{ url_for('views.settings') }}" class="btn btn-secondary w-100 p-2">
                    {% trans %}Settings{% endtrans %}
                  </a>
                </div>
              </div>
              {{ form.nonce() }}
            </form>
          {% endwith %}
        </div>
      </div>

      <div class="col-lg-4 col-xl-4">
        <div class="mario-auth-illustration" aria-hidden="true">
          <img class="mario-auth-illustration__sprite mario-auth-illustration__sprite--pipe" src="{{ url_for('views.themes', theme=Configs.theme or 'core-beta', path='img/mario/pipe.svg') }}" alt="">
          <img class="mario-auth-illustration__sprite mario-auth-illustration__sprite--star" src="{{ url_for('views.themes', theme=Configs.theme or 'core-beta', path='img/mario/star.svg') }}" alt="">
          <img class="mario-auth-illustration__sprite mario-auth-illustration__sprite--flower" src="{{ url_for('views.themes', theme=Configs.theme or 'core-beta', path='img/mario/fire-flower.svg') }}" alt="">
        </div>
      </div>
    </div>
  </div>
{% endblock %}

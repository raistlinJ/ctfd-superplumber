import{d as w,c as g,m as d,C as s}from"./index.js";import{c as y,m as b,e as v}from"./index.1cf73b05.js";import"./echarts.128204f2.js";function x(i,t,c){let n={title:{left:"center",text:"Top 10 "+(i==="teams"?"Teams":"Users")},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{type:"scroll",orient:"horizontal",align:"left",bottom:35,data:[]},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{}}},grid:{containLabel:!0},xAxis:[{type:"time",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],dataZoom:[{id:"dataZoomX",type:"slider",xAxisIndex:[0],filterMode:"filter",height:20,top:35,fillerColor:"rgba(233, 236, 241, 0.4)"}],series:[]};const a=Object.keys(t);for(let e=0;e<a.length;e++){const l=[],u=[];for(let o=0;o<t[a[e]].solves.length;o++){l.push(t[a[e]].solves[o].value);const r=w(t[a[e]].solves[o].date);u.push(r.toDate())}const h=y(l);let m=u.map(function(o,r){return[o,h[r]]});n.legend.data.push(t[a[e]].name);const f={name:t[a[e]].name,type:"line",label:{normal:{position:"top"}},itemStyle:{normal:{color:g(t[a[e]].name+t[a[e]].id)}},data:m};n.series.push(f)}return c&&(n=b(n,c)),n}const T="ctfd:start-events";typeof window<"u"&&(window.__CTFdDeferEvents=!0);window.Alpine=d;window.CTFd=s;const p=window.scoreboardUpdateInterval||3e5;function _(){typeof window>"u"||window.__CTFdEventsReady||(window.__CTFdEventsReady=!0,window.dispatchEvent(new CustomEvent(T)))}d.data("ScoreboardDetail",()=>({data:{},show:!0,activeBracket:null,async update(){this.data=await s.pages.scoreboard.getScoreboardDetail(10,this.activeBracket);let i=window.scoreboardChartOptions,t=x(s.config.userMode,this.data,i);v(this.$refs.scoregraph,t),this.show=Object.keys(this.data).length>0},async init(){this.update(),setInterval(()=>{this.update()},p)}}));d.data("ScoreboardList",()=>({standings:[],brackets:[],activeBracket:null,async update(){this.brackets=await s.pages.scoreboard.getBrackets(s.config.userMode),this.standings=await s.pages.scoreboard.getScoreboard()},async init(){this.$watch("activeBracket",i=>{this.$dispatch("bracket-change",i)});try{await this.update()}finally{_()}setInterval(()=>{this.update()},p)}}));

System.register(["./relativeTime-legacy.5DXx4rWe.js","./index-legacy.BqBXe2ll.js","./clipboard-legacy.CQ3qZlim.js"],function(e,s){"use strict";var t,i,n,r,l;return{setters:[e=>{t=e.m},e=>{i=e.C,n=e.M},e=>{r=e.s,l=e.c}],execute:function(){window.Alpine=t,t.data("SettingsForm",()=>({success:null,error:null,initial:null,errors:[],init(){this.initial=r(this.$el)},async updateProfile(){this.success=null,this.error=null,this.errors=[];let e=r(this.$el,this.initial,!0);e.fields=[];for(const t in e)if(t.match(/fields\[\d+\]/)){let s={},i=parseInt(t.slice(7,-1));s.field_id=i,s.value=e[t],e.fields.push(s),delete e[t]}const s=await i.pages.settings.updateSettings(e);s.success?(this.success=!0,this.error=!1,setTimeout(()=>{this.success=null,this.error=null},3e3)):(this.success=!1,this.error=!0,Object.keys(s.errors).map(e=>{const t=s.errors[e];this.errors.push(t)}))}})),t.data("TokensForm",()=>({token:null,async generateToken(){const e=r(this.$el);e.expiration||delete e.expiration;const s=await i.pages.settings.generateToken(e);this.token=s.data.value,new n(this.$refs.tokenModal).show()},copyToken(){l(this.$refs.token)}})),t.data("Tokens",()=>({selectedTokenId:null,async deleteTokenModal(e){this.selectedTokenId=e,new n(this.$refs.confirmModal).show()},async deleteSelectedToken(){await i.pages.settings.deleteToken(this.selectedTokenId);const e=this.$refs[`token-${this.selectedTokenId}`];e&&e.remove()}})),t.start()}}});

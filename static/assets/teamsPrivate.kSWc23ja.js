import{m as o}from"./relativeTime.GKSnQAGw.js";import{C as i,M as r,c as d}from"./index.BhDPMm3o.js";import{s as n,c as m}from"./clipboard.CfWndw0T.js";import{e as c,g as u}from"./index.C5GHsEEB.js";function h(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}window.Alpine=o;window.CTFd=i;o.store("inviteToken","");o.data("TeamEditModal",()=>({success:null,error:null,initial:null,errors:[],init(){this.initial=n(this.$el.querySelector("form"))},async updateProfile(){let e=n(this.$el,this.initial,!0);e.fields=[];for(const s in e)if(s.match(/fields\[\d+\]/)){let a={},l=parseInt(s.slice(7,-1));a.field_id=l,a.value=e[s],e.fields.push(a),delete e[s]}let t=await i.pages.teams.updateTeamSettings(e);t.success?(this.success=!0,this.error=!1,setTimeout(()=>{this.success=null,this.error=null},3e3)):(this.success=!1,this.error=!0,Object.keys(t.errors).map(s=>{const a=t.errors[s];this.errors.push(a)}))}}));o.data("TeamCaptainModal",()=>({success:null,error:null,errors:[],async updateCaptain(){let e=n(this.$el,null,!0),t=await i.pages.teams.updateTeamSettings(e);t.success?window.location.reload():(this.success=!1,this.error=!0,Object.keys(t.errors).map(s=>{const a=t.errors[s];this.errors.push(a)}))}}));o.data("TeamInviteModal",()=>({copy(){m(this.$refs.link)}}));o.data("TeamDisbandModal",()=>({errors:[],async disbandTeam(){let e=await i.pages.teams.disbandTeam();e.success?window.location.reload():this.errors=e.errors[""]}}));o.data("CaptainMenu",()=>({captain:!1,editTeam(){this.teamEditModal=new r(document.getElementById("team-edit-modal")),this.teamEditModal.show()},chooseCaptain(){this.teamCaptainModal=new r(document.getElementById("team-captain-modal")),this.teamCaptainModal.show()},async inviteMembers(){const e=await i.pages.teams.getInviteToken();if(e.success){const t=e.data.code,s="".concat(window.location.origin).concat(i.config.urlRoot,"/teams/invite?code=").concat(t);document.querySelector("#team-invite-modal input[name=link]").value=s,this.$store.inviteToken=s,this.teamInviteModal=new r(document.getElementById("team-invite-modal")),this.teamInviteModal.show()}else Object.keys(e.errors).map(t=>{const s=e.errors[t];alert(s)})},disbandTeam(){this.teamDisbandModal=new r(document.getElementById("team-disband-modal")),this.teamDisbandModal.show()}}));o.data("TeamGraphs",()=>({solves:null,fails:null,awards:null,solveCount:0,failCount:0,awardCount:0,getSolvePercentage(){return(this.solveCount/(this.solveCount+this.failCount)*100).toFixed(2)},getFailPercentage(){return(this.failCount/(this.solveCount+this.failCount)*100).toFixed(2)},getCategoryBreakdown(){const e=[],t={};this.solves.data.map(a=>{e.push(a.challenge.category)}),e.forEach(a=>{a in t?t[a]+=1:t[a]=1});const s=[];for(const a in t)s.push({name:a,count:t[a],percent:t[a]/e.length*100,color:d(a)});return s},async init(){this.solves=await i.pages.teams.teamSolves("me"),this.fails=await i.pages.teams.teamFails("me"),this.awards=await i.pages.teams.teamAwards("me"),this.solveCount=this.solves.meta.count,this.failCount=this.fails.meta.count,this.awardCount=this.awards.meta.count;let e=window.teamScoreGraphChartOptions;c(this.$refs.scoregraph,u(i.team.id,i.team.name,this.solves.data,this.awards.data,e))}}));o.start();export{h as __vite_legacy_guard};

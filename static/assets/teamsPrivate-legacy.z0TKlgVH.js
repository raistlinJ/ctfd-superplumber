System.register(["./relativeTime-legacy.5DXx4rWe.js","./index-legacy.BqBXe2ll.js","./clipboard-legacy.CQ3qZlim.js","./index-legacy.BDrNi-R6.js"],function(e,t){"use strict";var a,s,i,o,n,r,l,d;return{setters:[e=>{a=e.m},e=>{s=e.C,i=e.M,o=e.c},e=>{n=e.s,r=e.c},e=>{l=e.e,d=e.g}],execute:function(){window.Alpine=a,window.CTFd=s,a.store("inviteToken",""),a.data("TeamEditModal",()=>({success:null,error:null,initial:null,errors:[],init(){this.initial=n(this.$el.querySelector("form"))},async updateProfile(){let e=n(this.$el,this.initial,!0);e.fields=[];for(const a in e)if(a.match(/fields\[\d+\]/)){let t={},s=parseInt(a.slice(7,-1));t.field_id=s,t.value=e[a],e.fields.push(t),delete e[a]}let t=await s.pages.teams.updateTeamSettings(e);t.success?(this.success=!0,this.error=!1,setTimeout(()=>{this.success=null,this.error=null},3e3)):(this.success=!1,this.error=!0,Object.keys(t.errors).map(e=>{const a=t.errors[e];this.errors.push(a)}))}})),a.data("TeamCaptainModal",()=>({success:null,error:null,errors:[],async updateCaptain(){let e=n(this.$el,null,!0),t=await s.pages.teams.updateTeamSettings(e);t.success?window.location.reload():(this.success=!1,this.error=!0,Object.keys(t.errors).map(e=>{const a=t.errors[e];this.errors.push(a)}))}})),a.data("TeamInviteModal",()=>({copy(){r(this.$refs.link)}})),a.data("TeamDisbandModal",()=>({errors:[],async disbandTeam(){let e=await s.pages.teams.disbandTeam();e.success?window.location.reload():this.errors=e.errors[""]}})),a.data("CaptainMenu",()=>({captain:!1,editTeam(){this.teamEditModal=new i(document.getElementById("team-edit-modal")),this.teamEditModal.show()},chooseCaptain(){this.teamCaptainModal=new i(document.getElementById("team-captain-modal")),this.teamCaptainModal.show()},async inviteMembers(){const e=await s.pages.teams.getInviteToken();if(e.success){const t=e.data.code,a=`${window.location.origin}${s.config.urlRoot}/teams/invite?code=${t}`;document.querySelector("#team-invite-modal input[name=link]").value=a,this.$store.inviteToken=a,this.teamInviteModal=new i(document.getElementById("team-invite-modal")),this.teamInviteModal.show()}else Object.keys(e.errors).map(t=>{const a=e.errors[t];alert(a)})},disbandTeam(){this.teamDisbandModal=new i(document.getElementById("team-disband-modal")),this.teamDisbandModal.show()}})),a.data("TeamGraphs",()=>({solves:null,fails:null,awards:null,solveCount:0,failCount:0,awardCount:0,getSolvePercentage(){return(this.solveCount/(this.solveCount+this.failCount)*100).toFixed(2)},getFailPercentage(){return(this.failCount/(this.solveCount+this.failCount)*100).toFixed(2)},getCategoryBreakdown(){const e=[],t={};this.solves.data.map(t=>{e.push(t.challenge.category)}),e.forEach(e=>{e in t?t[e]+=1:t[e]=1});const a=[];for(const s in t)a.push({name:s,count:t[s],percent:t[s]/e.length*100,color:o(s)});return a},async init(){this.solves=await s.pages.teams.teamSolves("me"),this.fails=await s.pages.teams.teamFails("me"),this.awards=await s.pages.teams.teamAwards("me"),this.solveCount=this.solves.meta.count,this.failCount=this.fails.meta.count,this.awardCount=this.awards.meta.count;let e=window.teamScoreGraphChartOptions;l(this.$refs.scoregraph,d(s.team.id,s.team.name,this.solves.data,this.awards.data,e))}})),a.start()}}});
